<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bouncy Pixel | Project Details</title>
    <!-- Load Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Load MathJax for Vector Symbols -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Configure Tailwind for custom colors and font (Matches Main Site) -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-primary': '#F0F0F0',
                        'text-default': '#2A2A2A',
                        'charcoal-accent': '#333333',
                        'card-bg': 'rgba(255, 255, 255, 0.5)',
                        'dark-border': '#E0E0E0',
                        'project-meta': '#555555',
                        'light-charcoal-bg': '#D3D3D3',
                    },
                    fontFamily: {
                        sans: ['Poppins', 'sans-serif'],
                        heading: ['Poppins', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');

        .glass-card {
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 10px 40px 0 rgba(0, 0, 0, 0.25);
        }

        /* Custom progress bar styling */
        .custom-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: var(--tw-colors-charcoal-accent);
            cursor: pointer;
            margin-top: -5px;
            box-shadow: 0 0 5px rgba(51, 51, 51, 0.5);
        }

        .custom-range::-moz-range-thumb {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: var(--tw-colors-dark-border);
            cursor: pointer;
            box-shadow: 0 0 5px rgba(51, 51, 51, 0.5);
        }

        .custom-range {
            height: 5px;
            background: var(--tw-colors-dark-border);
            -webkit-appearance: none;
            appearance: none;
            cursor: pointer;
        }

        #progress-bar {
            background: linear-gradient(to right, var(--tw-colors-charcoal-accent) var(--value), var(--tw-colors-dark-border) var(--value));
        }

        #project-video {
            -webkit-appearance: none;
            appearance: none;
            display: block;
            cursor: default;
        }

            #project-video:not([poster]) {
                background-image: none;
            }

        #video-controls {
            pointer-events: none;
        }

            #video-controls > * {
                pointer-events: auto;
            }

        /* Video Dimensions: 16:9 Ratio (800x450) */
        .project-video-size {
            width: 800px;
            height: 450px;
        }

        .body-gradient {
            background: linear-gradient(to bottom, #F0F0F0 0%, #F5F5F5 50vh, #D3D3D3 100%);
            background-attachment: fixed;
        }
    </style>
</head>
<body class="text-text-default font-sans antialiased body-gradient">

    <!-- Fixed Navigation Header -->
    <header class="fixed top-0 left-0 right-0 bg-bg-primary z-50 shadow-md">
        <div class="container mx-auto px-6 lg:px-24 py-4 flex justify-between items-center">
            <a href="../index.html" class="text-xl font-heading font-bold text-charcoal-accent">Ankit Dabas</a>
            <a href="../index.html#projects" class="sm:text-sm text-charcoal-accent font-semibold hover:underline">← Back to Portfolio</a>
        </div>
    </header>

    <!-- Main Project Detail Content -->
    <div class="container mx-auto px-6 lg:px-24 py-12 pt-32">

        <!-- 1. Video Player -->
        <div class="w-full h-full flex justify-center mb-8">
            <div class="project-video-size">
                <div class="relative w-full h-full">
                    <video id="project-video"
                           muted playsinline
                           poster="https://placehold.co/800x450/2A2A2A/E0E0E0?text=Pong+Gameplay"
                           class="w-full h-full object-cover shadow-2xl"
                           preload="metadata"
                           controls="false"
                           playsinline>
                        <!-- Replace with actual video path -->
                         <source src="../projects/Video/BouncyPixel/BouncyPixel.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>

                    <div id="video-controls" class="absolute inset-x-0 bottom-0 mx-auto w-full p-1">
                        <input type="range" id="progress-bar" value="0" min="0" max="100" step="0.1"
                               class="w-full custom-range transition-colors duration-100 mb-1">
                        <div class="flex items-center justify-end text-xs font-semibold text-bg-primary" style="text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);">
                            <div class="flex space-x-1">
                                <span id="current-time">0:00</span>
                                <span>/</span>
                                <span id="video-duration">0:00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Title -->
        <div class="mb-12 border-b border-dark-border pb-4">
            <h1 class="text-4xl font-heading font-bold text-text-default mb-1 text-center">Bouncy Pixel</h1>
            <p class="text-xl text-project-meta text-center">Solo Developer | [Unreal Engine/C++]</p>
        </div>

        <!-- 3. About & Info Grid -->
        <div class="w-[90%] mx-auto mb-12">
            <div class="grid grid-cols-2 gap-8">
                <!-- About -->
                <div class="bg-light-charcoal-bg p-10 rounded-xl shadow-md">
                    <h3 class="text-2xl font-heading font-bold text-charcoal-accent mb-4 border-b border-dark-border/50 pb-2">About This Project</h3>
                    <div class="text-md leading-relaxed text-text-default space-y-3">
                        <p>
                            I created Bouncy Pixel as my final project for Harvard's CS50 course. Bouncy Pixel is a Pong-style arcade game I built using Unreal Engine 4.27 with a mix of C++ and Blueprint. It supports both single-player and local two-player modes where both players share the same keyboard. As you play, the ball gradually speeds up and leaves a trail effect behind it, making the gameplay more intense as your score climbs. I also added dust particle effects that trigger whenever the ball hits a wall, giving each impact some satisfying visual feedback.
                        </p>
                    </div>
                </div>

                <!-- Info -->
                <div class="bg-light-charcoal-bg p-10 rounded-xl shadow-md">
                    <h3 class="text-2xl font-heading font-bold text-charcoal-accent mb-4 border-b border-dark-border/50 pb-2">Project Info</h3>
                    <ul class="text-md leading-relaxed text-text-default space-y-2">
                        <li class="font-semibold">Game: <span class="text-project-meta font-normal opacity-100">Bouncy Pixel</span></li>
                        <li class="font-semibold">Course: <span class="text-project-meta font-normal opacity-100">CS50: Introduction to Computer Science (Harvard/edX)</span></li>
                        <li class="font-semibold">Game Genre: <span class="text-project-meta font-normal opacity-100">Arcade / Pong-Style</span></li>
                        <li class="font-semibold">Engine Version: <span class="text-project-meta font-normal opacity-100">Unreal Engine 4.27</span></li>
                        <li class="font-semibold">Language: <span class="text-project-meta font-normal opacity-100">C++ & Blueprint (Hybrid Development)</span></li>
                        <li class="font-semibold">Duration: <span class="text-project-meta font-normal opacity-100">10 Days</span></li>
                        <li class="font-semibold">Role: <span class="text-project-meta font-normal opacity-100">Solo Developer</span></li>
                       
                    </ul>
                </div>
            </div>
        </div>

        <!-- 4. Reflection Vector -->
        <div class="w-[90%] mx-auto mb-12">
            <div class="bg-light-charcoal-bg p-10 rounded-xl shadow-md">
                <h3 class="text-2xl font-heading font-bold text-charcoal-accent mb-4 border-b border-dark-border/50 pb-2">Reflection Vector</h3>
                <div class="text-md leading-relaxed text-text-default space-y-4">
                    <p>
                        When the ball hits a wall or paddle in Pong, I need to calculate how it bounces off. The reflection formula I use is:
                    </p>

                    <!-- Reflection Vector Diagram Image -->
                    <div class="my-6 flex justify-center">
                        <img src="../projects/img/Pong/reflectionVector.jpg"
                             alt="Diagram showing reflection vector calculation"
                             class="rounded-lg shadow-md w-1/2 h-auto">
                    </div>

                    <!-- Main Formula -->
                    <div class="text-center py-4 text-xl">
                        \[ \vec{R} = \vec{V} - 2(\vec{V} \cdot \vec{N})\vec{N} \]
                    </div>

                    <p>
                        Where \( \vec{R} \) is the reflected velocity, \( \vec{V} \) is the ball's incoming velocity, and \( \vec{N} \) is the surface normal (perpendicular direction). Here's how each part works:
                    </p>

                    <!-- 1. The Dot Product -->
                    <div>
                        <strong class="font-bold text-charcoal-accent text-lg block mb-1">1. The Dot Product \( (\vec{V} \cdot \vec{N}) \)</strong>
                        <p>
                            I calculate the dot product between the ball's velocity (\( \vec{V} \)) and the wall's normal (\( \vec{N} \)). This gives me a single number representing how much of the ball's movement is going directly into the wall—basically measuring the collision strength perpendicular to the surface.
                        </p>
                    </div>

                    <!-- 2. Converting to a Vector -->
                    <div>
                        <strong class="font-bold text-charcoal-accent text-lg block mb-1">2. Converting to a Vector \( ((\vec{V} \cdot \vec{N})\vec{N}) \)</strong>
                        <p>
                            That dot product is just a number, so I multiply it by the normal vector \( \vec{N} \) to turn it back into a directional vector. This new vector represents the part of the ball's velocity pushing straight into the wall.
                        </p>
                    </div>

                    <!-- 3. Multiplying by 2 -->
                    <div>
                        <strong class="font-bold text-charcoal-accent text-lg block mb-1">3. Multiplying by 2</strong>
                        <p>
                            I multiply by 2 because subtracting once would just stop the ball, but subtracting twice reverses the direction. First subtraction cancels the inward velocity, second creates equal outward force—that's the bounce.
                        </p>
                    </div>

                    <!-- 4. Subtraction -->
                    <div>
                        <strong class="font-bold text-charcoal-accent text-lg block mb-1">4. Subtraction \( (\vec{V} - 2(\vec{V} \cdot \vec{N})\vec{N}) \)</strong>
                        <p>
                            Finally, I subtract this from the original velocity. The ball keeps its motion parallel to the wall but flips its perpendicular component, creating the reflection.
                        </p>
                    </div>

                </div>
            </div>
        </div>

        <!-- 5. Local Multiplayer Mechanic -->
        <div class="w-[90%] mx-auto mb-12">
            <div class="bg-light-charcoal-bg p-10 rounded-xl shadow-md">
                <h3 class="text-2xl font-heading font-bold text-charcoal-accent mb-4 border-b border-dark-border/50 pb-2">Local Multiplayer Mechanic</h3>
                <div class="text-md leading-relaxed text-text-default space-y-3">
                    <p>
                        To support two-player local gameplay in Bouncy Pixel, I built a straightforward input system that lets both players use the same keyboard simultaneously. Each paddle has two Boolean flags: bIsLeftPaddle to identify which side it belongs to, and bIsTwoPlayer to toggle multiplayer mode on or off.
                    </p>
                    <p>
                        When the game starts, the PlayerController automatically finds and assigns both paddles using a for-loop that searches through all paddle actors in the level. It checks each paddle's bIsLeftPaddle flag to figure out if it's the left or right paddle, then stores references to both. This way, I don't have to manually wire up paddles in the editor—it's all handled programmatically.
                    </p>
                    <p>
                        Input bindings are simple: PlayerOne's keys control the left paddle, PlayerTwo's keys control the right paddle. Each input just calls the paddle's move() function, which handles vertical movement along with speed limits, boundary checking, and stopping behavior. This keeps the code modular—input logic stays in the PlayerController, movement logic stays in the Paddle class, and the automatic paddle detection happens during BeginPlay().
                    </p>
                    <p>
                        At startup, I use a TActorIterator to scan the world and find all paddle instances. This loop goes through every paddle in the level and checks its bIsLeftPaddle tag to determine ownership. The beauty of this approach is flexibility—no hardcoded references, no manual Blueprint assignments. The system automatically maps paddles based on their tags, making the multiplayer setup clean and easy to maintain or expand.
                    </p>
                </div>
            </div>
        </div>

        <!-- 6. Additional Features -->
        <div class="w-[90%] mx-auto mb-12">
            <div class="bg-light-charcoal-bg p-10 rounded-xl shadow-md">
                <h3 class="text-2xl font-heading font-bold text-charcoal-accent mb-4 border-b border-dark-border/50 pb-2">Additional Features</h3>
                <div class="text-md leading-relaxed text-text-default space-y-4">

                    <p>
                        Beyond the core gameplay, I implemented several polish features to enhance the player experience and add visual feedback.
                    </p>

                    <div>
                        <strong class="font-bold text-charcoal-accent text-lg block mb-1">Squash & Stretch Effect</strong>
                        <p>
                            I created a squash-and-stretch effect using Unreal's Timeline system driven by a custom CurveFloat. When the ball or paddle collides, the timeline triggers and interpolates between the object's StartScale and TargetScale using FMath::Lerp() inside a SquashProgress() callback function. The curve I designed has a V-shaped profile—it dips down during impact (squash) then bounces back to normal size (stretch). This gives each collision a dynamic, satisfying feel that makes the game more visually engaging and responsive.
                        </p>
                    </div>

                    <div>
                        <strong class="font-bold text-charcoal-accent text-lg block mb-1">High Score System</strong>
                        <p>
                            I implemented persistent high score tracking using Unreal's USaveGame class. Whenever the player's current score exceeds the saved high score, the game automatically updates and saves the new record. The save data persists between play sessions, so players can see their best performance even after closing the game. This was straightforward to implement—I just created a custom SaveGame object to store the high score variable, then used Unreal's save/load functions to write it to disk and retrieve it on startup.
                        </p>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <!-- Footer -->
    <footer class="container mx-auto px-6 lg:px-24 py-8 text-center text-sm text-project-meta border-t border-dark-border">
        <p>&copy; <span id="current-year"></span> Ankit Dabas. All Rights Reserved.</p>
    </footer>

    <!-- Video Script -->
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = Math.floor(seconds % 60);
            const formattedSeconds = remainingSeconds < 10 ? '0' + remainingSeconds : remainingSeconds;
            return `${minutes}:${formattedSeconds}`;
        }

        function updateProgressBar(video, progressBar, currentTimeSpan, durationSpan) {
            if (!video || !progressBar || !currentTimeSpan || !durationSpan) return;
            const percentage = (video.currentTime / video.duration) * 100;
            progressBar.style.setProperty('--value', percentage + '%');
            progressBar.value = percentage;
            currentTimeSpan.textContent = formatTime(video.currentTime);
            if (durationSpan && !isNaN(video.duration)) {
                durationSpan.textContent = formatTime(video.duration);
            }
        }

        function initVideoPlayer() {
            const video = document.getElementById('project-video');
            const progressBar = document.getElementById('progress-bar');
            const currentTimeSpan = document.getElementById('current-time');
            const durationSpan = document.getElementById('video-duration');

            if (!video) return;

            video.addEventListener('ended', () => {
                video.pause();
                video.currentTime = 0;
            });

            video.addEventListener('loadedmetadata', () => {
                if (durationSpan) durationSpan.textContent = formatTime(video.duration);
            });

            if (video.readyState >= 2) {
                if (durationSpan) durationSpan.textContent = formatTime(video.duration);
            }

            video.addEventListener('timeupdate', () => {
                updateProgressBar(video, progressBar, currentTimeSpan, durationSpan);
            });

            if (progressBar) {
                progressBar.addEventListener('input', () => {
                    if (!isNaN(video.duration)) {
                        const newTime = (progressBar.value / 100) * video.duration;
                        video.currentTime = newTime;
                        updateProgressBar(video, progressBar, currentTimeSpan, durationSpan);
                    } else {
                        console.error("Video duration not loaded, cannot seek.");
                    }
                });
            }

            video.muted = true;
            if (video.readyState >= 3) {
                video.play();
            } else {
                video.addEventListener('canplay', () => {
                    video.play();
                }, { once: true });
            }

            if (progressBar) progressBar.style.setProperty('--value', '0%');
        }

        document.addEventListener('DOMContentLoaded', () => {
            initVideoPlayer();
        });
    </script>
</body>

</html>
